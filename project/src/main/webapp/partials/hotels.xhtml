<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:b="http://bootsfaces.net/ui">

    <f:metadata>
        <f:viewParam name="fromCity" value="#{searchBean.fromCity}" />
        <f:viewParam name="toCity" value="#{searchBean.toCity}" />
        <f:viewParam name="numPassengers" value="#{searchBean.numPassengers}" />
        <f:viewParam name="fromDate" value="#{searchBean.fromDate}" converter="javax.faces.DateTime" />
        <f:viewParam name="toDate" value="#{searchBean.toDate}" converter="javax.faces.DateTime" />
    </f:metadata>

    <ui:composition template="/WEB-INF/template.xhtml">
        <ui:define name="content">
            <b:row>
                <b:column span="2">
                    <h:outputText value="Sort by:" style="font-weight:bold" />
                </b:column>
                <b:column span="2">
                </b:column>
                <b:column span="8">
                    <p:selectOneButton value="#{selectOneButton.option}" onchange="byRating()" >
                        <f:selectItem itemLabel="Price" itemValue="0"  />
                        <f:selectItem itemLabel="Popularity" itemValue="1"  />
                        <f:selectItem itemLabel="Rating" itemValue="2" />
                        
                        
                    </p:selectOneButton>
                      <p:commandButton value="Submit" update="display" icon="ui-icon-check" />
                     <h:outputText  id="display" value="Options: #{selectOneButton.option}" />
                </b:column>
            </b:row>
            <b:row>
                <b:jumbotron id="jumbo" >
                     
                    <h:dataTable value="#{searchBean.retrievedHotels}" var="hotel" style="width: 100%; "  >
                        <h:column>
                            
                            <b:panel contentStyle="padding: 0" title="Ett makalÃ¶st erbjudande!" collapsible="false"  >
                                <b:row>
                                    <b:column span="3">
                                        <img src="#{request.contextPath}/resources/img/hotel1.jpg" style="align-items: flex-end"/>
                                    </b:column>
                                    <b:column span="6">
                                        <h4><h:outputText value="#{hotel.name}"/> ***</h4>
                                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. In porta elit eget euismod iaculis. Duis bibendum enim id nisl lobortis, a vehicula sem fringilla... 
                                    </b:column>
                                    <b:column span="3" style="text-align: right">
                                        <div style="height: 100px;"></div>
                                        <div style="padding: 10px">
                                            <h:outputText value="Price: #{hotel.price}"  />
                                        </div>
                                    </b:column>
                                </b:row>
                            </b:panel>  
                        </h:column>                        
                    </h:dataTable>
                 </b:jumbotron>

            </b:row>
            <b:row>
                <b:column span="2">
                </b:column>
                <b:column span="1">
                    <p:commandButton value="Back" style ="padding: 10px 5px;"  />
                </b:column>
                <b:column span="4">

                </b:column>

                <b:column span="2">
                    <p:commandButton value="Confirm" style ="padding: 10px 5px;"  />
                </b:column>
            </b:row>
             <script>
                  function byRating() {
        switch(#{selectOneButton.option}){
            
        case '0':
              #{searchBean.retrievedHotels} = searchBean.orderByPrice(searchBean.getAvailableHotels(searchBean.fromDate, searchBean.toDate, searchBean.toCity, searchBean.numPassengers);
             break;
        case '1':
            #{searchBean.retrievedHotels} = searchBean.orderByRating(searchBean.getAvailableHotels(searchBean.fromDate, searchBean.toDate, searchBean.toCity, searchBean.numPassengers);
            break;
        case '2':
            #{searchBean.retrievedHotels} = searchBean.orderByRatingAndPrice(searchBean.getAvailableHotels(searchBean.fromDate, searchBean.toDate, searchBean.toCity, searchBean.numPassengers);
            break;
        default:  
             #{searchBean.retrievedHotels} = searchBean.orderByPrice(searchBean.getAvailableHotels(searchBean.fromDate, searchBean.toDate, searchBean.toCity, searchBean.numPassengers);
             break;
        }
}


        </script>
        </ui:define>
    </ui:composition>
   
        
</html>
